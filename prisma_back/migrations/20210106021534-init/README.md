# Migration `20210106021534-init`

This migration has been generated by sesia at 1/6/2021, 11:15:34 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `Post` MODIFY `postCategory` ENUM('JOB', 'REPAIR', 'ETC') NOT NULL

CREATE TABLE `PurchaseHistory` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `createdAt` DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
    `updatedAt` DATETIME(3) NOT NULL,
    `date` VARCHAR(191) NOT NULL,
    `cardCompany` VARCHAR(191) NOT NULL,
    `price` DECIMAL(65,30) NOT NULL,
    `installment` VARCHAR(191) NOT NULL,
    `receipt` VARCHAR(191) NOT NULL,
    `userId` INT NOT NULL,

    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `PurchaseHistory` ADD FOREIGN KEY (`userId`) REFERENCES `User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210104083521-init..20210106021534-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model User {
   id              Int               @id @default(autoincrement())
@@ -22,8 +22,9 @@
   riggingRecords  CraneData[]
   overWorks       OverWork[]
   following       User[]            @relation("FollowRelation", references: [id])
   followers       User[]            @relation("FollowRelation", references: [id])
+  PurchaseHistory PurchaseHistory[]
 }
 model Post {
   id           Int          @id @default(autoincrement())
@@ -74,9 +75,9 @@
   userId         Int?
 }
 model RiggingData {
-  id                       Int               @id @default(autoincrement())
+  id                       Int          @id @default(autoincrement())
   mainBoom                 Float
   mainAngle                Float
   totalExtLength           Float
   adapter1                 Float
@@ -89,9 +90,9 @@
   flyFixLuffingAngle       Float
   distance1                Float
   distance2                Float
   craneDistance            Float
-  edgeDistance             EdgeDistance      @relation(fields: [edgeDistanceId], references: [id])
+  edgeDistance             EdgeDistance @relation(fields: [edgeDistanceId], references: [id])
   edgeDistanceId           Int
   centerToBuildingDistance Float
   centerToBlockDistance    Float
   craneToBuildingDistance  Float
@@ -109,11 +110,11 @@
   optional                 String
   safetyFactor             Float
   craneLocation            String
   workWeight               Float
-  workBuilding             WorkBuilding      @relation(fields: [workBuildingId], references: [id])
+  workBuilding             WorkBuilding @relation(fields: [workBuildingId], references: [id])
   workBuildingId           Int
-  block                    Block             @relation(fields: [blockId], references: [id])
+  block                    Block        @relation(fields: [blockId], references: [id])
   blockId                  Int
 }
 model EdgeDistance {
@@ -165,8 +166,21 @@
   post      Post?    @relation(fields: [postId], references: [id])
   postId    Int?
 }
+model PurchaseHistory {
+  id          Int      @id @default(autoincrement())
+  createdAt   DateTime @default(now())
+  updatedAt   DateTime @updatedAt
+  date        String
+  cardCompany String
+  price       Float
+  installment String
+  receipt     String
+  user        User     @relation(fields: [userId], references: [id])
+  userId      Int
+}
+
 enum PostCategory {
   JOB
   REPAIR
   ETC
```


